{
  "$id": "https://schemas.meshery.io/capability.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Meshery manages components in accordance with their specific capabilities. This field explicitly identifies those capabilities largely by what actions a given component supports; e.g. metric-scrape, sub-interface, and so on. This field is extensible. ComponentDefinitions may define a broad array of capabilities, which are in-turn dynamically interpretted by Meshery for full lifecycle management.",
  "additionalProperties": false,
  "type": "object",

  "required": ["schemaVersion", "version", "displayName", "kind", "type", "state", "status"],

  "properties": {
    "schemaVersion": {
      "$ref": "../core.json#/definitions/versionString",
      "description": "Specifies the version of the schema to which the capability definition conforms."
    },
    "version": {
      "$ref": "../core.json#/definitions/semverString",
      "description": "Version of the capability definition.",
      "minLength": 1,
      "maxLength": 50
    },
    "displayName": {
      "$ref": "../core.json#/definitions/inputString",
      "description": "Name of the capability in human-readible format."
    },
    "description": {
      "type": "string",
      "description": "A written representation of the purpose and characteristics of the capability."
    },

    "kind": {
      "$ref": "../core.json#/definitions/inputString",
      "description": "Kind of the capability",
      "anyOf": [
        {
          "const": "configuration",
          "description": "For capabilities related to components configuration  like config, labels , annotations,etc"
        },
        {
          "const": "visualization",
          "description": "For capabilities related to visualization of components like labels , styles"
        },
        {
          "const": "management",
          "description": "For capabilities related to management of components like start, stop, restart, etc"
        },
        {
          "const": "interaction",
          "description": "For capabilities related to interaction with components like edit , delete , etc"
        },
        {
          "const": "integration",
          "description": "For capabilities related to integration of components like  relationships ,etc"
        },
        {
          "const": "security",
          "description": "For capabilities related to security of components like policies , rbac, etc"
        },
        {
          "const": "performance",
          "description": "For capabilities related to performance of components like load testing, performance testing, etc"
        },
        {
          "const": "workflow",
          "description": "For capabilities related to workflow of components like CI/CD, GitOps, etc"
        },
        {
          "const": "persistence",
          "description": "For capabilities related to persistence of components like database, storage, etc"
        },
        {
          "const": "communication",
          "description": "For capabilities related to communication of components like logstraming , messaging, etc"
        }
      ]
    },

    "type": {
      "$ref": "../core.json#/definitions/inputString",
      "description": "Classification of capabilities. Used to group capabilities similar in nature."
    },

    "subType": {
      "$ref": "../core.json#/definitions/inputString",
      "description": "Most granular unit of capability classification. The combination of Kind, Type and SubType together uniquely identify a Capability."
    },

    "key": {
      "$ref": "../core.json#/definitions/inputString",
      "description": "Key that backs the capability."
    },

    "state": {
      "$ref": "../core.json#/definitions/inputString",
      "description": "State of the component in which the capability is applicable.",
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["declaration", "instance"]
      }
    },

    "status": {
      "type": "string",
      "description": "Status of the capability",
      "enum": ["enabled", "disabled"]
    },

    "metadata": {
      "type": "object",
      "description": "Metadata contains additional information associated with the capability.",
      "additionalProperties": true
    }
  }
}

